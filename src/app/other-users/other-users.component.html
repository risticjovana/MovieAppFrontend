<h2 class="section-label">Other Users</h2>
<div class="user-grid">
  <div class="user-card" *ngFor="let user of users" (click)="openUserModal(user)">
    <img class="profile-pic" [src]="user.imageUrl" alt="User Avatar" />
    <div class="user-info">
      <div class="name">{{ user.firstName }} {{ user.lastName }}</div>
      <div class="email">{{ user.email }}</div>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal" [class.show]="selectedUser" (click)="closeUserModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <button class="close-btn" (click)="closeUserModal()">Ã—</button>
    <img class="profile-pic-large" [src]="selectedUser?.imageUrl" alt="User Avatar" />
    <h3>{{ selectedUser?.firstName }} {{ selectedUser?.lastName }}</h3>
    <p>{{ selectedUser?.email }}</p>
    <p><strong>Role:</strong> {{ selectedUser?.roleString || 'N/A' }}</p>
    <p><strong>Rank:</strong> {{ selectedUser?.rank || 'N/A' }}</p>
    <p><strong>Followers:</strong> {{ selectedUser?.followers }}</p>
    <button (click)="followUser(selectedUser)"> 
      {{ selectedUser?.isFollowed ? 'Unfollow' : 'Follow' }}
    </button>
  </div>
</div>

<div *ngIf="showPopup" class="popup-overlay">
  <div class="popup-content">
    <p>{{ popupMessage }}</p>
    <button (click)="viewFollowers()">View My Followers</button>
    <button (click)="showPopup = false">Close</button>
  </div>
</div>
