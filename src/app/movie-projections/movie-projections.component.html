<div *ngIf="isLoading">Loading projections...</div>
<div *ngIf="errorMsg">{{ errorMsg }}</div>

<div *ngIf="!isLoading && !errorMsg">
  <h2>Projections for Movie ID: {{ contentId }}</h2>

  <!-- Cinema selector -->
  <label for="cinemaSelect">Select Cinema:</label>
  <select id="cinemaSelect" [(ngModel)]="selectedCinemaId" (change)="onCinemaChange()">
    <option [ngValue]="null" disabled>Select a cinema</option>
    <option *ngFor="let cinema of cinemasWithProjections" [ngValue]="cinema.cinemaId">
      {{ cinema.cinemaName }}
    </option>
  </select>

  <div class="date-selector">
    <button (click)="previousWeek()" class="arrow-btn">&lt;</button>

    <div class="days-row">
      <div
        *ngFor="let day of daysInWeek"
        class="day"
        [class.selected]="day.toDateString() === selectedDate?.toDateString()"
        (click)="selectDate(day)"
      >
        <div class="day-name">{{ day | date:'EEE' }}</div>
        <div class="day-number">{{ day | date:'d' }}</div>
      </div>
    </div>

    <button (click)="nextWeek()" class="arrow-btn">&gt;</button>
  </div>

  <!-- Projection selector -->
  <label for="projectionSelect">Select Projection Time:</label>
  <select
    id="projectionSelect"
    [(ngModel)]="selectedProjectionId"
    (change)="onProjectionChange()"
    [disabled]="!filteredProjections.length"
  >
    <option [ngValue]="null" disabled>Select a projection</option>
    <option *ngFor="let proj of filteredProjections" [ngValue]="proj.id">
      {{ proj.time.substring(0,5) }}
    </option>
  </select>

  <!-- Seat grid always rendered -->
  <div class="seat-grid-wrapper">
  <div class="screen-wrapper">
    <div class="screen-arc"></div>
    <div class="screen-label">SCREEN</div>
  </div>
  <div *ngFor="let row of rows" class="seat-row">
    <div class="seat-group left">
      <div *ngFor="let seat of row.left" class="seat" [class.empty]="seat === null">
      </div>
    </div>

    <div class="aisle"></div>

    <div class="seat-group right">
      <div *ngFor="let seat of row.right" class="seat" [class.empty]="seat === null">
      </div>
    </div>
  </div>
</div>
</div>
